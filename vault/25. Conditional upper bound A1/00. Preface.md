In this [[25. Conditional upper bound A1/00. Preface]], we prove the generalized [[20. Sofa area functional A/00. Preface#^thm-main-cap]] of the main [[01. Introduction/03. Main result#^thm-main]] by establishing a conditional upper bound $\mathcal{A}_1 : \mathcal{K}_\omega \to \mathbb{R}$ of the sofa area functional $\mathcal{A} : \mathcal{K}_\omega \to \mathbb{R}$. For any monotone sofa $S$ satisfying the injectivity condition, we prove $\mathcal{A}_1(K) \geq \mathcal{A}(K)$. Then we calculate the maximum value $1 + \omega^2/2$ of $\mathcal{A}_1$.

%%
We start with the observation that the domain $\mathcal{K}_\omega$ of $\mathcal{A}$ is a _convex space_.

If $\mathcal{A}$ is concave or quasi-concave, then a local optimum of $\mathcal{A}$ will be a global optimum. However, we 


The maximization of $\mathcal{A}_1$ turns out to be a convex quadratic programming. First, the domain $\mathcal{K}_\omega$ is a _convex space_ equipped with convex combination.

A way to think about . Then $\mathcal{K}_\omega$ embeds to continuous functions .



done by observing that $\mathcal{A}_1$ a _concave quadratic functional_ on the _convex space_ $\mathcal{K}_\omega$. First, the space of caps $\mathcal{K}_\omega$ is a _convex space_ equipped with convex combination 
%%

[[25. Conditional upper bound A1/01. Definition of A1]] defines the value $\mathcal{A}_1(K)$ of a cap $K$ as the area of $K$ subtracted by the area $\mathcal{I}(\mathbf{x}_K)$ enclosed by the inner corner $\mathbf{x}_K$ ([[25. Conditional upper bound A1/01. Definition of A1#^def-a1]]). Then [[25. Conditional upper bound A1/01. Definition of A1#^thm-a1-upper-bound]] proves that $\mathcal{A}_1$ is indeed an upper bound of $\mathcal{A}$ for monotone sofas satisfying the injectivity condition.

[[25. Conditional upper bound A1/02. Calculus of variation]] shows that the domain $\mathcal{K}_\omega$ of $\mathcal{A}_1$, the space of all caps $K$ with rotation angle $\omega$, is convex ([[25. Conditional upper bound A1/02. Calculus of variation#^pro-cap-space-convex-space]]). Then [[25. Conditional upper bound A1/02. Calculus of variation]] sets up the calculus of variation on a general concave quadratic functional $f$ on a convex domain $\mathcal{K}$. In particular, we introduce the notion of _directional derivative_ $Df(K; -)$ of $f$ ([[25. Conditional upper bound A1/02. Calculus of variation#^def-convex-space-directional-derivative]]), and show that any critical point $K \in \mathcal{K}$ satisfying $D f(K; -) \leq 0$ is a global maximum ([[25. Conditional upper bound A1/02. Calculus of variation#^thm-quadratic-variation]]). This will be used to do the calculus of variation on $f = \mathcal{A}_1$ with domain $\mathcal{K} = \mathcal{K}_\omega$.

[[25. Conditional upper bound A1/03. Boundary measure]] establishes that $\mathcal{A}_1$ is a quadratic functional on its domain $\mathcal{K}_\omega$. To do so, we introduce the _boundary measure_ $\beta_K$ of a cap $K$ ([[25. Conditional upper bound A1/03. Boundary measure#^def-boundary-measure]]) that measures the side lengths of the upper boundary $\delta K$; read the description following [[25. Conditional upper bound A1/03. Boundary measure#^def-boundary-measure]] for an example. The measure $\beta_K$ will be useful in computing the derivative of $\mathcal{A}_1$ ([[25. Conditional upper bound A1/15. Directional derivative of A1#^thm-variation-a1]]). We will establish the bijective correspondence between $K$ and $\beta_K$ ([[25. Conditional upper bound A1/03. Boundary measure#^thm-boundary-measure-cap]] and [[25. Conditional upper bound A1/03. Boundary measure#^thm-cap-from-boundary-measure]]).

[[25. Conditional upper bound A1/10. Concavity of A1]] establishes the concavity of $\mathcal{A}_1$ ([[25. Conditional upper bound A1/10. Concavity of A1#^thm-a1-negative-semidefinite]]), so that a local optimum of $\mathcal{A}_1$ is also a global optimum of $\mathcal{A}_1$. We will define the area $\mathcal{S}(K)$ of a region swept by segments tangent to cap $K$ (see [[25. Conditional upper bound A1/10. Concavity of A1#^fig-mamikon-sofa]]). We will apply _Mamikon's theorem_, a theorem in classical geometry, to show that $\mathcal{S}(K)$ is convex with respect to $K$. We then show that $\mathcal{S}(K) + \mathcal{A}_1(K)$ is linear with respect to $K$, showing the concavity of $\mathcal{A}_1$.

[[25. Conditional upper bound A1/15. Directional derivative of A1]] calculates the directional derivative $D\mathcal{A}_1(K; -)$ of $\mathcal{A}_1$ ([[25. Conditional upper bound A1/15. Directional derivative of A1#^thm-variation-a1]]) using the boundary measure $\beta_K$ and the facts on convex bodies in [[A1. Convex bodies/00. Preface]]. Finally, [[25. Conditional upper bound A1/20. Maximizer of A1]] computes the maximizer $K = K_{\omega, 1}$ of $\mathcal{A}_1(K)$ with maximum value $1 + \omega^2/2$ by solving for the condition where directional derivative $D\mathcal{A}_1(K; -)$ is always zero.