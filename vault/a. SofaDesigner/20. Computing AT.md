The procedure $\mathsf{sbranch}(\Theta)$ takes the finite angle set $\Theta$ and returns the subset of $\mathcal{K}_\Theta$ with $\mathcal{A}_\Theta (K) \geq \mu_G$ in a tree form.

Fix a finite angle set $\Theta$ with rotation angle $\pi/2$. Let $K$ be an arbitrary member of $\mathcal{K}_\Theta$. It often helps to denote a part of the sofa polygon simply by using index.

> __Definition [sofa-polygon-notations].__ Let the index $0 \leq i \leq n$ be taken arbitrary. Define the following notions for an arbitrary $K \in \mathcal{K}_\Theta$. ^def-sofa-polygon-notations
> 
> - $p_i = p(\theta_i)$, $\mathbf{x}_i = \mathbf{x}_K(\theta_i)$, $\mathbf{y}_i = \mathbf{y}_K(\theta_i)$
> - Lines $a_i = a_K(\theta_i)$, $b_i = b_K(\theta_i)$, $c_i = c_K(\theta_i)$, $d_i = d_K(\theta_i)$.
> - With a bit of abuse of notation, we will also define $d_i = c_{n + i}$ for any negative index $-n \leq i < 0$ as well.
> - $A_0 = a_0 \cap l(0, \pi/2)$ and $A_i = a_{i} \cap a_{i-1}$ for $i > 0$.

In this way, the niche of $S$ is bounded by a polyline forming. Also, the slope of $d_i$ increases by the index $i$, and is positive when $i > 0$ and negative when $i < 0$. Define the normal vectors $v_i$ of $d_i$ including the negative vectors.

The set $\mathcal{K}_\Theta$ is a polytope.

> __Definition [sofa-inequality].__ Define a _sofa inequality_ $I$ as a linear inequality on $\mathcal{K}_\Theta$ with equality condition.
> ^def-sofa-inequality

> __Definition [sofa-polytope].__ A _sofa polytope_ $N$ is a finite set of linear inequalities $\left\{ I_1, \dots, I_m \right\}$ on $\mathcal{K}_\Theta$. Say that $K \in N$ if the inequality $I_i$ holds for $K$ for all $1 \leq i \leq m$.
> ^def-sofa-polytope

So a sofa polytope $N$ denotes a subset of $\mathcal{K}_\Theta$ which is a polytope.

Let's make no distintion between a polytope $P$ and its list of inequalities.

> __Definition [branch-tree].__ A _branch tree_ $T$ of $\mathcal{K}_\Theta$ is a complete binary tree consisting of the followings. ^def-branch-tree
> 
> - Each node is a sofa polytope. 
> - The root node $N_0$ is the empty set $\left\{  \right\}$, and denotes the whole space $\mathcal{K}_\Theta$.
> - Any non-leaf node of $T$ is split into two childs $N \cup \left\{ I \right\}$ and $N \cup \left\{ I^c \right\}$ by a sofa inequality $I$.

> __Definition [polyline].__ A _polyline_ $\mathbf{i}$ is a finite sequence $\mathbf{i} = i_0, \dots, i_m$ of indices with integers $-n < i_j < n$ such that the followings hold. ^def-polyline
> 
> 1. $i_0 = i_m = 0$.
> 2. For any adjacent $i_{j - 1}$, $i_{j}$ with $j > 0$, we have $i_{j - 1} \neq i_j$.
> 3. If $i_{j - 1} > i_{j}$ for $j > 0$, then  $i_j = i_{j-1} - n$.
> 4. For any $1 \leq i < n$, if the numbers $i$ and $i - n$ both appear in $\mathbf{i}$, then all occurences of $i$ in $\mathbf{i}$ is on the left side of all the occurences of $i - n$ in $\mathbf{i}$.

The polyline $\mathbf{i}$ represents the subset of niche $\mathcal{N}(K)$ bounded from below by the line $y=0$ and bounded from above by the sequence of lines $l_{i_0}, l_{i_1}, \dots, l_{i_m}$ with the vertices $v(i_{j - 1}, i_{j})$ appearing from left to right. Condition 1 implies that the initial and final lines are equal to $l_0$ which is the line $y=0$. Condition 2 implies that the vertices $v(i_{j-1}. i_j)$ are well-defined for any $1 \leq j \leq m$. Condition 3 implies that any 

> __Definition [admits-polyline].__ A sofa polytope _admits_ the polyline $\mathbf{i} = i_0, \dots, i_m$ if it is guaranteed that the vertices $l_{i_k} \cap l_{i_{k+1}}$ are guaranteed to appear in the order from left to right for all $K \in N$.
> ^def-admits-polyline



(TODO: change the following into a theorem format)

> __Definition [sofa-branch-tree].__ A branch tree $T$ is a _sofa branch tree_ with angle set $\Theta$ if the followings hold. ^def-sofa-branch-tree
> 
> - The root node $T$ represents the convex polytope $\mathcal{K}_\Theta$.
> - Every leaf node of $T$ is either _invalid_ or _valid_.
> - A invalid node $P$ is equipped with an admitted polyline $\mathbf{i}$, so that the maximum value of $\mathcal{A}_\mathbf{i}$ constrainted to $P$ is at most $2.2195\dots$.
> - A valid node $P$ is also equipped with an admitted polyline $\mathbf{i}$, and represents a subset $P \cap \left\{ \mathcal{A}_{\mathbf{i}} \geq 2.2195 \right\}$.

Consider any set $N$ of inequalities. We use an abuse of notation, so that $N$ also denotes the subset of $\mathcal{K}_\Theta$ described by $N$. 
