Consider a movement of a sofa $S$ inside the fixed hallway $L$. By looking at the movement in the rotating frame of the moving sofa, we can change the problem to a moving _hallway_ problem. Let the moving sofa $S$ at time $t$ be positioned at $S_t = f_t(S)$ inside $L$, where $f_t$ is a rigid transformation with time $t$ spanning from $t=0$ to $t=T$. We can also assume without loss of generality that $S_0 = S$. Then the sofa $S$ is a subset of rotating hallway $L_t = f_t^{-1}(S)$ for any time $t \in [0, T]$. Also, the sofa $S$ is inside two strips: the initial $S = S_0$ is inside $H$, and the final $S_T$ is inside $V$ so $S \subseteq f^{-1}_T(V)$. 

This observation has been used as the first step in many existing works.

In this section, we impose further restrictions on how the hallways intersect without compromising the area of the sofa. First, by translating $S$ we can assume that $S$ lies inside the parallelogram $P_\omega$ touching its outer sides (Figure 1-a). Second, we can push the rotating hallway towards the sofa, so that every hallway $L_S(t)$ touches the sofa on its outer wall. What is true but not so trivial is that the resulting intersection is still connected if the initial sofa $S$ is connected.

The resulting shape consists of the cap which is a convex set that is the intersection of half-planes coming from , and the niche which is the area swept by the inner corner of the rotating hallway.

Indeed, sofas of sufficiently large area such as Hammersley's sofa or Gerver's sofa .

Instead of moving a sofa $S$ inside the fixed hallway $L$, we can fix the sofa $S$ and move/rotate the hallway $L$ by looking at the movement in perspective of the sofa. That is, the sofa is an intersection of rotating hallways. 

TODO: insert figure here and add references.

We will soon consider only a finite intersection of hallways with a prescribed set of angles. With this, we introduce the following notion of an intersection of rotating hallways.

> __Definition [standard-position].__ Say that a shape $S$ is in _standard position_ with respect to the _rotation angle_ $\omega \in [0, \pi/2]$ if the followings hold. ^def-standard-position

- $S$ is contained in the parallelogram $P_{\omega}$ (see [[02. Geometric Primitives#^def-parallelogram]]).
- $p_{S}(\omega)=p_S(\pi/2)=1$. In other words, $S$ touches the sides $l(\omega, 1)$ and $l(\pi/2, 1)$ of the parallelogram $P_\omega$.

> __Definition [hallway-intersection].__ A connected shape $S$ is a _hallway intersection_ with _rotation angle_ $\omega \in [0, \pi/2]$ and _angle set_ $\Theta \subseteq \left[ 0, \omega \right]$ if the followings hold.
> ^def-hallway-intersection

- $\Theta$ is a closed set such that $\left\{ 0, \omega \right\} \subseteq \Theta \subseteq [0, \omega]$
- $S$ is connected.
- $S$ is in standard position with respect to $\omega$.
- For every $\theta \in \Theta$, $S$ is contained in a translation of $R_\theta(L)$, the hallway rotated counterclockwise by an angle of $\theta$.

# Tangent Hallway

> __Definition [tangent-rigid-motion].__ For any shape $S$ in standard position with respect to $\omega \in [0, \pi/2]$ and an angle $t \in [0, \omega]$, define $f_S(t)$ as the rigid motion $f_S (t) = R_t \circ T_{\left( p_S(t) - 1, p_S(t + \pi/2) - 1 \right)}$.  ^def-tangent-rigid-motion

_Proof._ The continuity of $f_S(t)$ comes from the continuity of the support function $p_S(t)$. □

> __Definition [tangent-hallway].__ For any shape $S$ in standard position with respect to $\omega \in [0, \pi/2]$ and an angle $t \in [0, \omega]$, define the _tangent hallway_ $L_S(t) = [f_S(t)](L)$ of $S$ with angle $t$. Note that $f_S(t)$ is a proper rigid transformation so it is a map from $\mathbb{R}^2$ to $\mathbb{R}^2$.
> Accordingly, define the _inner corner_ $\mathbf{x}_S(t) = [f_S(t)](0, 0)$ and _outer corner_ $\mathbf{y}_S(t) = [f_S(t)](1, 1)$ of the tangent hallway $L_S(t)$. ^def-tangent-hallway

> __Lemma [in-tangent-hallway].__ If a shape $S$ in standard position with respect to $\omega \in [0, \pi/2]$ is contained in a translation of $R_t(L)$ for an angle $t \in [0, \omega]$, then the tangent hallway $L_S(t)$ of $S$ with angle $t$ contains $S$ as well. ^lem-in-tangent-hallway

_Proof._ As $S$ is contained in a translation of $R_t(L)$, the set $S' = [f_S(t)]^{-1}(S)$ is contained in a translation of $[f_S(t)]^{-1}(R_t(L)) = T_{\left( p_S(t) - 1, p_S(t + \pi/2) - 1 \right)}(L)$ and thus a translation of $L$. We will show that $S'$ is contained in $L$. This proves the goal as $S' \subseteq L$ implies the following. 
$$S = [f_{S}(t)](S') \subseteq [f_S(t)](L)=L_S(t)$$
To show $S' \subseteq L$, we first compute $p_{S'}(0) = 1$ and $p_{S'}(\pi/2)=1$. For any $u \in S^1$ we have the computation
$$p_{S}(u) = p_{[f_S(t)](S')}(u) = p_{T_{\left( p_S(t) - 1, p_S(t + \pi/2) - 1 \right)}(S')}(u-t)$$
so by letting $u=t$, we have $p_S(t) = p_{T_{\left( p_S(t) - 1, p_S(t + \pi/2) - 1 \right)}(S')}(0)=p_{S'}(0)+p_S(t)-1$ and by letting $u=t+\pi/2$, we have $p_S(t + \pi/2) = p_{T_{\left( p_S(t) - 1, p_S(t + \pi/2) - 1 \right)}(S')}(\pi/2)=p_{S'}(\pi/2)+p_S(t + \pi/2)-1$. That is, by evaluation we have $p_{S'}(0)=1$ and $p_{S'}(\pi/2) = 1$.
Now we show $S' \subseteq L$. By assumption we have $S' \subseteq L + (x_0, y_0)$ for some vector $(x_0, y_0) \in \mathbb{R}^2$. By comparing their support functions at $t=0, \pi/2$ we have $1=p_{S'}(0) \leq p_{L+(x_0, y_0)}(0) = 1 + x_{0}$ and $1=p_{S'}(\pi/2) \leq p_{L+(x_0, y_0)}(\pi/2) = 1 + y_0$ so we have $0 \leq x_0, y_0$. The set $(-\infty, x_0) \times (-\infty, y_0)$ is disjoint from $L + (x_0, y_0)$. Using $0 \leq x_0, y_0$ on the disjointness, we have that $(-\infty, 0) \times (-\infty, 0) \subseteq (-\infty, x_0) \times (-\infty, y_0)$ is also disjoint from $L + (x_0, y_0)$. So the set $(-\infty, 0) \times (-\infty, 0)$ is disjoint from $S' \subseteq L + (x_0, y_0)$. Also, $S' \subseteq (-\infty, 1] \times (-\infty, 1]$ because $p_{S'}(0)=1$ and $p_{S'}(\pi/2) = 1$. Thus, $S' \subseteq L = (-\infty, 1] \times (-\infty, 1] \setminus (-\infty, 0) \times (-\infty, 0)$. □

> __Theorem [sofa-iff-hallway-intersection].__ A shape $S$ is a sofa with rotation angle $\omega \in [0, \pi/2]$ if and only if $S$ is connected and there is a proper rigid transformation $g$ such that $g(S)$ is a hallway intersection with the angle set $\Theta = [0, \omega]$. ^thm-sofa-iff-hallway-intersection

_Proof._ ($\Rightarrow$) We assume that $S$ is a sofa with rotation angle $\omega \in [0, \pi/2]$, and prove that there is a proper rigid transformation $g$ such that $g(S)$ is a hallway intersection with angle set $\Theta = [0, \omega]$. First of all, note that any rigid transformation of $S$ is also a sofa, so we can replace $S$ with its rigid transformation without loss of generality (TODO: elaborate what this means). Let $f_- : [a, b] \to \mathcal{T}$ be the movement of the sofa with rotation angle $\omega$ (see [[01. Sofa#^def-sofa]] and [[01. Sofa#^def-rotation-angle]]). 

By replacing $S$ with $f_a(S)$ and $f_t$ with $f_t \circ f_a^{-1}$, we can assume without loss of generality that $f_a(S) = S$ (that is, we can assume that $S$ starts its movement at its own position). Consequently, we get that $f_b$ is a proper rigid transformation with rotation angle $-\omega$. 

We will show that a translation of $S$ is in $P_\beta = H \cap R_{\omega} (V)$. By the definition of sofa movement [[01. Sofa#^def-sofa]], $S = f_a(S)$ lies in $H$. Also, $f_b(S) \subseteq V$ so $S \subseteq f_b^{-1}(V)$. As $f_b^{-1}$ has rotation angle $-\omega$, $f_b^{-1}(V)$ is a translation of $R_\omega(V)$. So $S$ also lies inside a translation of $R_\omega(V)$. Thus, a translation of $S$ lies in $P_\beta = H \cap R_\omega(V)$. By translating the $S$ inside $P_\beta$ towards the edges $l(\beta, 1)$ and $l(\pi/2, 1)$, we can find a translation of $S$ inside $P_{\beta}$ that also touches the edges $l(\beta, 1)$ and $l(\pi/2, 1)$. Without loss of generality, replace $S$ with this translation. Then we can assume $S$ is contained in the horizontal strip $H$ and $R_\omega(V)$, and that $p_{S}(\omega)=p_S(\pi/2)=1$. This proves the second and fourth condition for [[#^def-hallway-intersection]].

As $f_a$ is identity transformation and $f_b$ is a proper rigid transformation with rotation angle $-\omega$, by intermediate value theorem on the rotation angle we can always find some time $t$ where the transformation $f_t$ has rotation angle $-\theta$ for any $\theta \in [0, \omega]$. Then $f_t(S)$ contained in $L$ by the definition of sofa, and so $S$ is contained in $f^{-1}_{t}(L)$ which is the hallway rotated counterclockwise by an angle of $\theta$ for any $\theta \in [0, \omega]$. This proves the third condition for [[#^def-hallway-intersection]], ending the proof.

( $\Leftarrow$) Assume that $S$ is a hallway intersection with angle set $\Theta = [0, \omega]$. We will show that $S$ is a sofa with rotation angle $\omega$. By [[#^lem-in-tangent-hallway]] we have $L_S(t) = [f_S(t)](L)$ always containing $S$ for all $t \in [0, \omega]$. So $[f_S(t)^{-1}](S)$ is always contained in $L$ for all $t \in [0, \omega]$. As $f_S(t)^{-1}$ is is a rigid motion respect to $t$ by [[#^def-tangent-rigid-motion]], it remains for us to show that $[f_S(0)^{-1}](S)$ is contained in $H$ and $[f_S(\omega)^{-1}](S)$ is contained in $R_{\omega}(V)$. As $p_{S}(\omega)=p_S(\pi/2)=1$, the map $f_{S}(0)$ is a horizontal translation, so $[f_S(0)^{-1}](S)$ is contained in $H$ as $S \subseteq H$. Likewise, $f_{S}(\omega)^{-1}$ is a clockwise rotation of $\omega$ followed by vertical translation. As $S \subseteq R_\omega(V)$, this implies that $[f_S(\omega)^{-1}](S)$ is contained in $R_{\omega}(V)$. This finishes the proof. □